"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.updateCountry = exports.toCountry = exports.toIso = exports.toCiIso = void 0;
const input_1 = require("./input");
const toCiIso = (address) => {
    if (/^GY/.test(address.postcode))
        return "GG";
    if (/^JE/.test(address.postcode))
        return "JE";
    return null;
};
exports.toCiIso = toCiIso;
const UK = "United Kingdom";
const IOM = "Isle of Man";
const EN = "England";
const SC = "Scotland";
const WA = "Wales";
const NI = "Northern Ireland";
const CI = "Channel Islands";
const toIso = (address) => {
    const country = address.country;
    if (country === EN)
        return "GB";
    if (country === SC)
        return "GB";
    if (country === WA)
        return "GB";
    if (country === NI)
        return "GB";
    if (country === IOM)
        return "IM";
    if (country === CI)
        return (0, exports.toCiIso)(address);
    return null;
};
exports.toIso = toIso;
const toCountry = (address) => {
    const country = address.country;
    if (country === EN)
        return UK;
    if (country === SC)
        return UK;
    if (country === WA)
        return UK;
    if (country === NI)
        return UK;
    if (country === IOM)
        return IOM;
    if (country === CI) {
        const iso = (0, exports.toCiIso)(address);
        if (iso === "GG")
            return "Guernsey";
        if (iso === "JE")
            return "Jersey";
    }
    return null;
};
exports.toCountry = toCountry;
const updateCountry = (select, address) => {
    if (!select)
        return;
    if ((0, input_1.isSelect)(select)) {
        const iso = (0, exports.toIso)(address);
        if ((0, input_1.hasValue)(select, iso))
            (0, input_1.change)({ e: select, value: iso });
        const bcc = (0, exports.toCountry)(address);
        if ((0, input_1.hasValue)(select, bcc))
            (0, input_1.change)({ e: select, value: bcc });
    }
    if ((0, input_1.isInput)(select)) {
        const bcc = (0, exports.toCountry)(address);
        (0, input_1.change)({ e: select, value: bcc });
    }
};
exports.updateCountry = updateCountry;
